<html>
<head>
<title>SiRF Binary to RINEX</title>
</head>

<META NAME="KEYWORDS" CONTENT="GPS, software, RINEX, u-blox, LEA-4T, AEK-4T, carrier phase">

<body background="whitep.gif" text="#000000" link="#0000ff" vlink="#551a8b" alink="#ff0000">

<h2><strong>SiRF Binary to RINEX</strong></h2>

<p>Dennis Milbert

<pre>
Updated:  2010-jun-18
</pre>

<!-------     <br wp="br1"><br wp="br2">     ------>
<p>The program, <em>sirfrin1</em>, takes a ".srf" binary file
and converts the MID 2, MID 7, and MID 28 message contents into a RINEX file.
Its binary in, and ASCII (RINEX) out.

<p>Note that this version of sirfrin1 only translates pseudrorange 
into the RINEX format.  Carrier phase is not supported.

<br wp="br1"><br wp="br2"><h3>Contents</h3>

<ul>
  <li><a href="#link0">Operation</a></li>
  <li><a href="#link1">RINEX Format</a></li>
  <li><a href="#link5">Shortcomings</a></li>
  <li><a href="#linkx">Source Code and Binary Executable</a></li>
  <li><a href="#linky">Links to Other Pages</a></li>
  <li><a href="#linkz">To Contact Me</a></li>
  <li><a href="index.html">Back To Home</a></li>
</ul>

<!-- --------------------------------------------------------------------- -->
<br wp="br1"><br wp="br2"><h4><a name="link0"><hr>
<p>Operation</a></h4>

<p>The program operates in the DOS window.  Alternatively, you can simply
run "sirfrin1.exe" with a double click or with "Run..." in your "Start" menu.
(I use the DOS window myself.)

<p>One file is needed for input.  One file is generated as output.  
The names are fixed.  The files must be in the subdirectory where you are
working.

<p>Input File:

<p><em>sirfrin1.srf</em> -- Binary format.  You <em>must</em> have
logged MID 2, MID 7, and MID 28 messages.

<p>Output File:

<p><em>sirfrin1.obs</em> -- ASCII, RINEX format.  A RINEX observation file 
containing the pseudorange information in the MID 28 messages.
A generic header is also constructed -- edit those elements you wish to
change (like station ID).

<p>Command Line Options:

<p>The following option may be specified following the "sirfrin1".
A hyphen (minus sign) is the prefix any command line option.  For example:
<pre>
sirfrin1 -c
</pre>
Command line options are used when you have opened a DOS window or when
you use "Run..." in your "Start" menu.

<p><em>-c</em> -- "clean".  Drop all MID 28 records that do not have a 
valid clock bias estimate in the MID 7 record.  Default
action is to retain records without a valid clock bias estimate.  Note:  
the SiRF seems to need a little time to warm up before it issues clock
bias values.

<p>Discussion:

<p>The program generates a few lines of output in the DOS window.
It echos the command line options it has detected. It lists counts of
the number of binary messages it has encountered.  It bypasses data
not associated with a valid MID 2 message (a non-zero XYZ position).
If the clean option is selected, it bypasses data without an
associated valid clock bias in a MID 7 message.  Note that the 
"GPS Software Time" is converted into the "GPS Time of Receipt" by
application of the clock bias.  Pseudorange is also adjusted by the
clock bias times the speed of light.

<p>The program only supports the version 2.2.0 and earlier software
version of the SiRF binary format.  Double precision byte values are
rearranged in accordance with instructions at the bottom of page 3-34
of the SiRF Binary Protocol Reference Manual (Version 2.4).  If the 
double precision binary data are not formatted as expected, the 
following message is issued:

<pre>
 detected bad pseudorange decoding
 this version of sirfrin1 does not handle
 this binary file format

</pre>

and the program is halted.



<!-- --------------------------------------------------------------------- -->
<br wp="br1"><br wp="br2"><h4><a name="link1"><hr>
<p>RINEX Format</a></h4>

<p>The RINEX version 2.10 format (10Dec2007) can be obtained from the 
<a href="http://igscb.jpl.nasa.gov/newformats.html">International GPS Service</a>.

<!-- --------------------------------------------------------------------- -->
<br wp="br1"><br wp="br2"><h4><a name="link5"><hr>
<p>Shortcomings</a></h4>

<p>This is "no frills" software.  There are no warranties of any sort.
No Windows GUI.  Just the core function.

<p>You must have the input file with the name <em>sirfrin1.srf</em>.  The program will
overwrite any existing "sirfrin1.obs" file in the working directory.  The program will not
process data with alternative kinds of binary double precision formatting.

<!-- --------------------------------------------------------------------- -->
<br wp="br1"><br wp="br2"><h4><a name="linkx"><hr>
<p>Source Code and Binary Executable</a></h4>

<p>The Fortran source code (2010jun18) is <a href="sirfrin1.for.txt">sirfrin1.for</a>.

<p>The compiled executable (zipped) is <a href="sirfrin1.zip">sirfrin1.exe</a>.

<!-- --------------------------------------------------------------------- -->
<br wp="br1"><br wp="br2"><h4><a name="linky"><hr>
<p>Links to Other Pages</a></h4>

<p>The links here expand on the topics above.

<ul>

<p>SiRF Binary Protocol Reference Manual:
<a href="http://www.usglobalsat.com/downloads/SiRF_Binary_Protocol.pdf"> Version 2.4</a>
(1.7Mb).

</ul>

<!-- ------------------------------------------------------------------ -->
<br wp="br1"><br wp="br2"><h4><a name="linkz"><hr>
<p>To Contact Me</a></h4>

<p>My e-mail user name is the first initial of my first name
followed by all the letters of my last name (see above).  My ISP is
"comcast", and it is a "dot-net", not a "dot-com".  Sorry for not spelling
out my e-mail address, but I try to keep the spam-bots
from fingering me.  But, just so the spam-bots don't feel left
out, they can always go to abuse@comcast.net

<!-- ------------------------------------------------------------------ -->
<br wp="br1"><br wp="br2"><hr>

<p>
<a href="index.html">Back To Home</a>

</body>
</html>
